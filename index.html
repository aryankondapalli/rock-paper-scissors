<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Rock Paper Scissors</title>
    </head>
    <body>
        <script>

            function getComputerChoice(){
                const temp = Math.floor(Math.random() * 3) + 1;
                let choice = '';
                if(temp == 1){
                    choice = 'rock';
                }
                else if (temp == 2){
                    choice = 'paper';
                }
                else{
                    choice = 'scissors';
                }
                return choice;
            }

            function playRound(playerSelection,computerSelection){
                playerSelection = playerSelection.toLowerCase();
                playerSelection = playerSelection.trim();
                if(playerSelection == computerSelection){
                    console.log('tie');
                    return 'tie';
                }
                else if((playerSelection == 'rock' && computerSelection == 'scissors') || 
                (playerSelection == 'paper' && computerSelection == 'rock') ||
                (playerSelection == 'scissors' && computerSelection == 'paper')){
                    console.log(`Player wins. ${playerSelection} beats ${computerSelection}`);
                    return 'player';
                }
                else{
                    console.log(`Computer wins. ${computerSelection} beats ${playerSelection}`);
                    return 'computer';
                }
            }

            function game(){
                let playerScore = 0;
                let computerScore = 0;
                while(playerScore < 5 && computerScore < 5){
                    playerSelection = prompt('Rock, Paper, or Scissors?','rock');
                    if(playerSelection == null){
                        console.log('Game ended.');
                        break;
                    }
                    let winner = playRound(playerSelection,getComputerChoice());
                    if(winner == 'tie'){
                        continue;
                    }
                    else if(winner == 'player'){
                        playerScore++;
                    }
                    else if(winner == 'computer'){
                        computerScore++;
                    }
                    console.log(`Score: ${playerScore}|${computerScore}`)
                }
                if(playerScore == 5){
                    console.log(`Player wins the set. Final Score: ${playerScore}|${computerScore}`);
                }
                if(computerScore == 5){
                    console.log(`Computer wins the set. Final Score: ${playerScore}|${computerScore}`);
                }
            }

            game();

        </script>
    </body>
</html>